(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(6),s=n.n(o),i=(n(15),n(9)),l=n(2),u=n(7),d=n(8),f=new(function(){function e(t){Object(u.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(d.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"addNewCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers,body:JSON.stringify()}).then(this._handleResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:this._headers,body:JSON.stringify()}).then(this._handleResponse)}},{key:"editAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"b2a2a541-6bef-4eb9-91cd-396f84ba323f","Content-Type":"application/json"}}),j=Object(c.createContext)(),b=n.p+"static/media/logo.2e17206c.svg";var m=function(){return Object(a.jsx)("header",{className:"header page__header",children:Object(a.jsx)("img",{className:"header__logo",src:b,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})})};var p=function(e){var t=e.card,n=e.onCardClick,r=e.onCardLike,o=e.onCardDelete,s=Object(c.useContext)(j),i=t.owner._id===s._id,l=t.likes.some((function(e){return e._id===s._id}));return Object(a.jsxs)("li",{className:"card",children:[Object(a.jsx)("img",{src:t.link,alt:t.name,className:"card__img",onClick:function(){n(t)}}),Object(a.jsxs)("div",{className:"card__sign",children:[Object(a.jsx)("h2",{className:"card__title",children:t.name}),Object(a.jsxs)("div",{className:"card__container",children:[Object(a.jsx)("button",{className:"card__button ".concat(l&&"card__button_active"),type:"button","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 - \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",onClick:function(){r(t)}}),Object(a.jsx)("p",{className:"card__like-counter",children:t.likes.length})]})]}),i&&Object(a.jsx)("button",{className:"card__recycle",onClick:function(){o(t)},type:"button","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 - \u0443\u0434\u0430\u043b\u0438\u0442\u044c"})]})};var h=function(e){var t=e.onEditProfile,n=e.onAddPlace,r=e.onEditAvatar,o=e.onCardClick,s=e.onCardDelete,i=e.onCardLike,l=e.cards,u=Object(c.useContext)(j);return Object(a.jsxs)("main",{className:"content page__main",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsxs)("div",{className:"profile__container",children:[Object(a.jsx)("div",{className:"profile__shading",children:Object(a.jsx)("button",{className:"profile__avatar-btn",type:"button","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 - \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",onClick:r})}),Object(a.jsx)("img",{className:"profile__avatar",src:u.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440"})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__box",children:[Object(a.jsx)("h1",{className:"profile__name",children:u.name}),Object(a.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f",onClick:t})]}),Object(a.jsx)("p",{className:"profile__job",children:u.about})]}),Object(a.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"\u041a\u043d\u043e\u043f\u043a\u0430 - \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:n})]}),Object(a.jsx)("section",{className:"cards",children:Object(a.jsx)("ul",{className:"cards__list",children:l.map((function(e){return Object(a.jsx)(p,{card:e,onCardDelete:s,onCardLike:i,onCardClick:o},e._id)}))})})]})};var O=function(){var e=Object(c.useState)(2020),t=Object(l.a)(e,2),n=t[0],r=t[1],o=(new Date).getFullYear();return o>2020&&r("2020-".concat(o)),Object(a.jsx)("footer",{className:"footer page__footer",children:Object(a.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",n,' "Mesto" , \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041b\u043e\u0433\u0443\u043d\u043e\u0432']})})};var A=function(e){var t=e.name,n=e.card,c=e.isOpen,r=e.onClose;return Object(a.jsx)("div",{className:"popup ".concat(c&&"popup_opened"," popup_").concat(t),onClick:function(e){e.target===e.currentTarget&&r()},children:Object(a.jsxs)("div",{className:"zoom",children:[Object(a.jsx)("img",{src:n.link,alt:n.name,className:"zoom__img"}),Object(a.jsx)("p",{className:"zoom__text",children:n.name}),Object(a.jsx)("button",{className:"zoom__close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",onClick:r})]})})};var _=function(e){var t=e.name,n=e.title,r=e.btn,o=e.children,s=e.isOpen,i=e.onClose,l=e.onSubmit,u=Object(c.useRef)();return Object(c.useEffect)((function(){s&&u.current.reset()}),[s]),Object(a.jsx)("div",{className:"popup ".concat(s&&"popup_opened"," popup_form_").concat(t),onClick:function(e){e.target===e.currentTarget&&i()},children:Object(a.jsxs)("form",{className:"form popup__form",onSubmit:l,name:t,noValidate:!0,ref:u,children:[Object(a.jsx)("h2",{className:"form__title form__title_size_s",children:n}),o,Object(a.jsx)("button",{className:"form__submit form__submit_size_s",type:"submit",children:r}),Object(a.jsx)("button",{className:"form__close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u043a\u043d\u043e",onClick:i})]})})};var v=function(e){var t=e.isOpen,n=e.onClose,r=e.onUpdateUser,o=e.isFormLoading,s=e.onBtnLoading,i=Object(c.useContext)(j),u=Object(c.useState)(i.name),d=Object(l.a)(u,2),f=d[0],b=d[1],m=Object(c.useState)(i.about),p=Object(l.a)(m,2),h=p[0],O=p[1];return Object(c.useEffect)((function(){t&&(b(i.name),O(i.about))}),[i,t]),Object(a.jsxs)(_,{name:"editForm",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",btn:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(),r({name:f,about:h})},children:[Object(a.jsxs)("label",{className:"form__field",children:[Object(a.jsx)("input",{className:"form__input",id:"nickname-input",onChange:function(e){b(e.target.value)},value:f,type:"text",name:"name",autoComplete:"off",minLength:"2",maxLength:"40",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"nickname-input-error"})]}),Object(a.jsxs)("label",{className:"form__field",children:[Object(a.jsx)("input",{className:"form__input",id:"job-input",onChange:function(e){O(e.target.value)},value:h,type:"text",name:"about",autoComplete:"off",minLength:"2",maxLength:"200",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"job-input-error"})]})]})};var g=function(e){var t=e.isOpen,n=e.onClose,r=e.onUpdateAvatar,o=e.isFormLoading,s=e.onBtnLoading,i=Object(c.useRef)();return Object(a.jsx)(_,{name:"avatarForm",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",btn:o?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(),r(i.current.value,e)},children:Object(a.jsxs)("label",{className:"form__field",children:[Object(a.jsx)("input",{className:"form__input",id:"link-input",type:"url",name:"link",ref:i,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"link-input-error"})]})})};var x=function(e){var t=e.isOpen,n=e.onClose,r=e.isFormLoading,o=e.onBtnLoading,s=e.onAddPlace,i=Object(c.useRef)(),l=Object(c.useRef)();return Object(a.jsxs)(_,{name:"addForm",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",onSubmit:function(e){e.preventDefault(),o(),s({name:i.current.value,link:l.current.value},e)},btn:r?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,children:[Object(a.jsxs)("label",{className:"form__field",children:[Object(a.jsx)("input",{className:"form__input",id:"place-input",type:"text",name:"name",ref:i,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",autoComplete:"off",minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"place-input-error"})]}),Object(a.jsxs)("label",{className:"form__field",children:[Object(a.jsx)("input",{className:"form__input",id:"link-input",type:"url",name:"link",ref:l,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(a.jsx)("span",{className:"form__input-error",id:"link-input-error"})]})]})};var N=function(e){var t=e.isOpen,n=e.onClose,c=e.card,r=e.onCardClickDelete;return Object(a.jsx)(_,{name:"deleteForm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",btn:"\u0414\u0430",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),r(c)}})};var C=function(){var e=Object(c.useState)({name:"Name",about:"Description",avatar:"data:image/png;base64,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"}),t=Object(l.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){f.getUserInfo().then((function(e){r(e)})).catch((function(e){return console.log(e)}))}),[]);var o=Object(c.useState)([]),s=Object(l.a)(o,2),u=s[0],d=s[1];Object(c.useEffect)((function(){f.getInitialCards().then((function(e){d(e)})).catch((function(e){return console.log(e)}))}),[]);var b=Object(c.useState)({}),p=Object(l.a)(b,2),_=p[0],C=p[1],k=Object(c.useState)(!1),S=Object(l.a)(k,2),y=S[0],L=S[1],U=Object(c.useState)(!1),P=Object(l.a)(U,2),W=P[0],F=P[1],T=Object(c.useState)(!1),E=Object(l.a)(T,2),z=E[0],R=E[1],q=Object(c.useState)(!1),D=Object(l.a)(q,2),J=D[0],B=D[1],I=Object(c.useState)({name:"#",link:""}),M=Object(l.a)(I,2),Y=M[0],H=M[1],V=Object(c.useState)(!1),X=Object(l.a)(V,2),G=X[0],Z=X[1],w=function(){Z(!0)},K=function(){L(!1),F(!1),R(!1),B(!1),Z(!1)},Q=Object(c.useState)(!1),$=Object(l.a)(Q,2),ee=$[0],te=$[1],ne=function(){te(!0)};return Object(a.jsx)("div",{className:"page__container",children:Object(a.jsxs)(j.Provider,{value:n,children:[Object(a.jsx)(m,{}),Object(a.jsx)(h,{onEditProfile:function(){L(!0)},onAddPlace:function(){F(!0)},onEditAvatar:function(){R(!0)},onCardClick:function(e){H(e),B(!0)},onCardDelete:function(e){C(e),w()},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===n._id}));f.changeLikeCardStatus(e._id,t).then((function(t){var n=u.map((function(n){return n._id===e._id?t:n}));d(n)})).catch((function(e){return console.log(e)}))},cards:u}),Object(a.jsx)(O,{}),Object(a.jsx)(v,{isOpen:y,onClose:K,userInfo:n,onUpdateUser:function(e){f.updateUserInfo(e).then((function(e){r(e),K()})).catch((function(e){return console.log(e)})).finally((function(){return te(!1)}))},isFormLoading:ee,onBtnLoading:ne}),Object(a.jsx)(x,{isOpen:W,onClose:K,onAddPlace:function(e,t){f.addNewCard(e).then((function(e){d([e].concat(Object(i.a)(u))),K(),t.target.reset()})).catch((function(e){return console.log(e)})).finally((function(){return te(!1)}))},isFormLoading:ee,onBtnLoading:ne}),Object(a.jsx)(g,{isOpen:z,onClose:K,onUpdateAvatar:function(e,t){f.editAvatar(e).then((function(e){r(e),K(),t.target.reset()})).catch((function(e){return console.log(e)})).finally((function(){return te(!1)}))},isFormLoading:ee,onBtnLoading:ne}),Object(a.jsx)(N,{isOpen:G,onClose:K,onCardClickDelete:function(e){f.deleteCard(e._id).then((function(){var t=u.filter((function(t){return!(t._id===e._id)}));d(t),K()})).catch((function(e){return console.log(e)}))},card:_}),Object(a.jsx)(A,{name:"zoomed",card:Y,isOpen:J,onClose:K})]})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(C,{})}),document.getElementById("root")),k()}},[[16,1,2]]]);
//# sourceMappingURL=main.1ebb16c3.chunk.js.map